{"componentChunkName":"component---src-templates-post-js","path":"/blog/portfolio-site-continuous-integration-github-action/","result":{"data":{"markdownRemark":{"html":"<p>After learning about GatsbyJS and building a static Portfolio site and blog, I searched for systems to deploy this website. At this point, I had purchased the domain name through AWS Route53, but I still needed somewhere to host the static files.</p>\n<p>I chose to deploy the site through Digital Ocean Droplet. This was a remote Ubuntu virtual machine with an IP address I could route to. Once I installed apache web server software and connected domain name, the website was live.</p>\n<p>There was still one problem with this deployment process. Updating the website took several steps. After local development, I needed to build/generate the static files with Gatbsy locally, and push them to the GitHub repo. Then, I would ssh into the Ubuntu Droplet, clone the updated repo again, and replace the static files for apache to serve.</p>\n<p>Steps to deploy were repetitive. Having to remember terminal commands and finding passwords was inconvenient. I was unable to build the static files on the remote Ubuntu machine with limited hardware specs.</p>\n<p>One improvement I made was writing a script to delete and copy new files when deploying on Digital Ocean. This addition did not solve everything, as I hard-coded my github username and repository name.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token comment\"># RUN the script:</span>\n<span class=\"token comment\"># sudo ./syncBuild.sh portfolio-site</span>\n\n<span class=\"token assign-left variable\">GITHUB_LINK</span><span class=\"token operator\">=</span><span class=\"token string\">\"https://github.com/spencerlepine/<span class=\"token variable\">$1</span>.git\"</span>\n\n<span class=\"token function\">git</span> clone <span class=\"token string\">\"<span class=\"token variable\">$GITHUB_LINK</span>\"</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token variable\">$GREEN</span> successfully cloned repo<span class=\"token variable\">$NC</span> <span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Removing the current public folder\"</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-r</span> <span class=\"token parameter variable\">-d</span> public\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Moving into the github repo folder\"</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Moving public folder contents OUT of repo folder\"</span>\n<span class=\"token function\">mv</span> public <span class=\"token punctuation\">..</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token variable\">$GREEN</span> Successfully copy news files <span class=\"token variable\">$NC</span> <span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Moving back into parent directory\"</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Deleting leftover github repo files\"</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-r</span>  <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Restarting apache server\"</span>\nsystemctl restart apache2\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token variable\">$GREEN</span> Public folder sync complete! <span class=\"token variable\">$NC</span>\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Visit: spencerlepine.com\"</span>\n\n<span class=\"token comment\"># \"syncBuild.sh\" 52L, 956C</span></code></pre></div>\n<p>Although this process took less than 10 minutes, switching between the IDE, GitHub, the terminal, and the browser was annoying. It would be better to automate this process. To do that, we can use a GitHub action that will trigger on every repository update. A handy feature of GitHub repositories is the ability to store secrets/environment variables. We can use this to store passwords directly connected to the repository, so all credentials needed for the project are stored in one place.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Let’s create the GitHub workflow file:</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name: CI\n\non:\n  push:\n    branches: [ master ]\n\njobs:\n\n  deploy:\n    name: Deploy\n    runs-on: ubuntu-latest\n    steps:\n    - name: Deploy Static Files\n      uses: appleboy/ssh-action@master\n      with:\n        host: ${{ secrets.HOST }}\n        username: ${{ secrets.USERNAME }}\n        key: ${{ secrets.KEY }}\n        passphrase: ${{ secrets.PASSPHRASE }}\n        port: ${{ secrets.PORT }}\n        script_stop: true\n        script: |\n          # change directory to where website files are stored\n          # clone the repository\n          # remove the current public folder w/ static files\n          # enter the repo folder\n          # extract the public folder from the repo folder\n          # remove the leftover GitHub repo files\n          # restart the web server\n          echo “Visit deployed site: spencerlepine.com”</code></pre></div>\n<h3>Conclusion</h3>\n<p>This GitHub action will use another <a href=\"https://github.com/appleboy/ssh-action\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ssh-action</a> action to handle the remote ssh connection. After storing the connection credentials in the GitHub repository secrets, this can securely/dynamically connect to the remote Ubuntu machine. The last key for this action job is the script, or verbatim Ubuntu commands that will be run. For the sake of brevity, I have only written pseudo-code for the deployment steps.</p>\n<p>With this file saved in the <code class=\"language-text\">.github</code> folder in the project,  GitHub can execute the action and connect to our remote server autonomously. After adding a blog post or updating the website, the only step required is pushing the code to GitHub (which I would do anyways). Now, the GitHub workflow will handle all of the steps to connect to the host server, delete old static files, and download the fresh static files.</p>\n<p>The continuous integration for this website is completely automated now. This saves me time and effort. No need to worry about forgetting how to deploy later on.</p>\n<hr>\n<p>View the source code on <a href=\"https://github.com/spencerlepine/spencerlepine.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub</a>.</p>\n<p>Also find me here:</p>\n<ul>\n<li><a href=\"https://twitter.com/SpencerLepine\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Twitter (@spencerlepine)</a></li>\n<li><a href=\"https://github.com/spencerlepine\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub (@spencerlepine)</a></li>\n<li><a href=\"https://www.linkedin.com/in/spencer-lepine/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LinkedIn</a></li>\n<li><a href=\"https://www.youtube.com/channel/UCBL6vAHJZqUlyJp-rcFU55Q\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">YouTube (Spencer Lepine)</a></li>\n</ul>","frontmatter":{"title":"Portfolio Site Continuous Integration GitHub Action","description":"Automating steps to deploy static files for my personal website.","date":"2021-10-11T00:00:00.000Z","slug":"/blog/portfolio-site-continuous-integration-github-action","tags":["GitHub","Actions","Repositories","ssh","Ubuntu","DigitalOcean"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACA0lEQVQozz2STW/TQBCG89eQkDjxezhwgCMXCioqhwoEEk2ROEAqLlxIyqGgNAlVWuo2bUgbx3bi+GPnY3dtb2wH2W15NIe5PHpnRtPQNaqGmWVN1TAL5GmonFjbkbbmeh4RI8RRFIVhGATL5bKh7tBKaa1ZSiJCRKUkEP92kr6Tdu10f5I6ITEhAtwUCFHJ+i4dAKpQIiaS1RRq7KsTh/44ZM05QEkgQIj/fkNKWRTFYNDf2nq9s/vx5earFxsbzebOapXHIABiSUgIKOLY9xGwkvE2v5GmaZ7ntm23O52RNRwcHrTb33v9/jovm8P21/NurlNpTHx0PHn0VHgeMldm7VdylmVaayLuX0L3ApilAFAqsbzZ2HcVK5AydBfznz0RxYhUL36XnKTZep1fzvXD57P7z2bH12SMuYpNJEsHilGYX8erhSo8sz6P1tMwYQK4OViSJGlWyWOX7j3uPnhyaE1RIG5/2X/b6mzvHWzufnvX6rxp/dj73Pr04f3w8JeWEoQAgEaWZcaY3Jh8ZS5n4uw6MlkikAejWe/MPrpwB9ZkeGF3T6fD09Hw+GRm28x8O3ZeFGVZLmXhYh5rE1DqxZp05nIZyDySxqUiyUyxqjLSzCidEHNViI2iKItMB57jO7YXseWn4yCRke9cTRaL5d8wPXJ0TEpVD1C/QA0iMvM/iilTqEJxbhkAAAAASUVORK5CYII=","aspectRatio":1.7857142857142858,"src":"/static/7531842723f20f431043c1a5c059c33d/8c332/thumbnail.png","srcSet":"/static/7531842723f20f431043c1a5c059c33d/95f17/thumbnail.png 150w,\n/static/7531842723f20f431043c1a5c059c33d/37d5a/thumbnail.png 300w,\n/static/7531842723f20f431043c1a5c059c33d/8c332/thumbnail.png 600w,\n/static/7531842723f20f431043c1a5c059c33d/03620/thumbnail.png 900w,\n/static/7531842723f20f431043c1a5c059c33d/4e530/thumbnail.png 1024w","sizes":"(max-width: 600px) 100vw, 600px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Preparing for My Amazon Front End Engineer Interview","description":"My experience and advice for the Amazon Front End Engineer interview.","slug":"/blog/preparing-for-my-amazon-front-end-engineer-interview","date":"2022-11-20T00:00:00.000Z","draft":false,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABgJOjZGcI/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAAxETIiP/2gAIAQEAAQUCONKvI8yRbDovUlx3/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABYRAQEBAAAAAAAAAAAAAAAAAAARMf/aAAgBAgEBPwHFf//EABsQAAEFAQEAAAAAAAAAAAAAAAEAAhESITEQ/9oACAEBAAY/AiWjVch0c55E4qBxIRjAv//EABsQAQEBAAIDAAAAAAAAAAAAAAERACFhMXGR/9oACAEBAAE/IWIY7cgX4ejDA1+aWITPWJMHmnDu7nAb/9oADAMBAAIAAwAAABCQ/wD/xAAXEQADAQAAAAAAAAAAAAAAAAAAASER/9oACAEDAQE/EHVDR//EABYRAQEBAAAAAAAAAAAAAAAAAAAhEf/aAAgBAgEBPxCww//EAB0QAQEAAgEFAAAAAAAAAAAAAAERADEhQVFhcbH/2gAIAQEAAT8QNXiQKvrs4hg0O/i1scEkkpXhJqkzkXEpzN38Gz5m59SEAz//2Q==","aspectRatio":1.3274336283185841,"src":"/static/de7335e1fee7f9648a3e37b7ff32e00e/c3638/interview.jpg","srcSet":"/static/de7335e1fee7f9648a3e37b7ff32e00e/59538/interview.jpg 150w,\n/static/de7335e1fee7f9648a3e37b7ff32e00e/88b18/interview.jpg 300w,\n/static/de7335e1fee7f9648a3e37b7ff32e00e/c3638/interview.jpg 600w,\n/static/de7335e1fee7f9648a3e37b7ff32e00e/67507/interview.jpg 900w,\n/static/de7335e1fee7f9648a3e37b7ff32e00e/0ff54/interview.jpg 1200w,\n/static/de7335e1fee7f9648a3e37b7ff32e00e/5f7bf/interview.jpg 4032w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"title":"TypeScript Development Set Up for VSCode","description":"Follow steps to set up VSCode for a TypeScript project, including auto-compile and format-on-save.","slug":"/blog/typescript-development-set-up-for-vscode","date":"2022-10-24T00:00:00.000Z","draft":false,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACdklEQVQoz22TWUgVURzGD6alhopZ6UtBYRFIC/TgU2RQL5EF4UJUTwaJgZgtWhIhqL20caWCLGwRsZCIMKtrYJJe18powa3FreyqM3fxzsxd5v5iZhIUOvDjf+BwPr4Pvr/wuDQM3C4NSVZNZGNK1t0la3jcGi5ZMQkFgDB4PQFkyWe+mbg0vG4NMS+mePygBRfjDxJWAqaQpoRBh6bnLdy8dRePrKCHwC2rzJsyEC5ZRfP6+fjTQ07dMFkPh8muGyanboTMe0NU2McJKTpfv4yQf6KQpOQUYmJj2ZN5kJfPmvF5g6ao22UJCyOe4aK+14ko7EQUd1uc6kYUdJBmG2Tw8xCpaVtYGhNDSlIicbkliOoPRGTkUlN9g3AY5FkrvpAlFd0X4PG7aURpL0vK+hDnei3OdpNRO0pnWwcJG7ex/Nh1oo9WEpV3hWV3hhDHbVwsPolxpJm5xQ4f9U0jSnooeTFOTY+TM83jlL0aY1/dGF2OPpLXbSCisB5hGyMhfT+xZU8QeTaqzpf+X7Dx/TSiqIudtwcofz1pztrePxxunORNq4P4Nams2L6bxPRMIkrbiKwPIbLLubDQ4XxkQ9CMfMLB+sufONTwjdWV/Vxrn6Lg6Sj9w062ZuUTGZ9IclwUKzfvQGRXEbvrCPeb3qL7QZYUy6FRGZ9H48fvOSrt41TaJ7jUMoGt7RdXWyd50DWFrgQZk3RO19pZlb6X6LWbOFBUgWPAiV81qmOJeRb20Gf0UA2CGjDRFQurhyqKWzUL3T44Q0Pnd/whCClBs6OLim126B/mdkgq8oJp4DY3RkWa9eH3+tHVEC7JZ8Y0zMz/NyL/BbsBxJJgX6exAAAAAElFTkSuQmCC","aspectRatio":1.8987341772151898,"src":"/static/8c71c4537c0d511deba68fa72f815165/8c332/thumbnail.png","srcSet":"/static/8c71c4537c0d511deba68fa72f815165/95f17/thumbnail.png 150w,\n/static/8c71c4537c0d511deba68fa72f815165/37d5a/thumbnail.png 300w,\n/static/8c71c4537c0d511deba68fa72f815165/8c332/thumbnail.png 600w,\n/static/8c71c4537c0d511deba68fa72f815165/03620/thumbnail.png 900w,\n/static/8c71c4537c0d511deba68fa72f815165/6050d/thumbnail.png 1200w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"title":"Quickly Open GitHub Repo in Browser From Terminal","description":"Create custom Git commands to open the repository web page in the browser.","slug":"/blog/quickly-open-github-repo-in-browser-from-terminal","date":"2022-10-22T00:00:00.000Z","draft":false,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAAChUlEQVQoz12TXUtUURSG57/0IwLpIuquEPugi65CGzKzRgjzo8wvytC0tBCVysAmUysJEqqLClJJzdIxsAIvwtJ0Ruecs8/H2ufM5BNnRina8LAXi7Xfvdjr3RHb0ihTowwP2/BysWUKyhQsw8vFYY2rNE6IpbHNvygjj2XkdSIqJyhY7m8sIZd07Syeu4V45GLTEH4lhfWUkDKEDUswlGDZgu0Irit47o6gIVjhwZlpvOdPUO4WaytJErPTvHnxjI21VT4kNDXXVqjuTVPVFlDXHtB4M6C5O6Clz6epR/NwzMO2hIgSsOcTBEd3E1wowRobpft2E/23Grl09giJj+PMzwgni9eJViua97tcLhJqosLFQqG2wKV8l0ln1ECpUNDyUZsO9LZCZyOpb0vcuFLB6MNePkyOs7L8nbkZxZniTcrPuXQcEFoPaJpKhLZjKdoOr1JbkKTvdBoVdhg+rKkyvJ+aY3F+EX8LNn4lETfDzvo0lSYWM4jFhM5CTeshTUOlUFctNJSmqC/+Qk/FZm4WEc/JsPpzg7bzZTztv8url28ZHhplMD7CYPwxE+MTLMw6VJyyqKjWdBZpOvYHNJc4tJxWtJywqN2zTG9pCqXCoZiC42TpeTDMu+kEk+PT3Ltzn8H4MF03u3k8MsLCrE151KbsvKb9oKZ5n6bmuE1d1OJSscm5vT/oOrFO6JhIOGpb+SytOSwnHQKBTADZDGQDYAu+fra5dd2jp0sYqhIeVbrE6x3i9YrBqyYDTQavBwzssMMdY4vy8ZSf85yZ9jANL7+nvZyhPVsjriC+4Gc0QUaTyfoEQX7Xvr/tw/BnhCKhH/9lO79D/iKNuRkiGP8R5sK6P0Ka9D+KYDXBAAAAAElFTkSuQmCC","aspectRatio":1.8987341772151898,"src":"/static/72552018b8aa23d4d2f519fbf005414b/8c332/thumbnail.png","srcSet":"/static/72552018b8aa23d4d2f519fbf005414b/95f17/thumbnail.png 150w,\n/static/72552018b8aa23d4d2f519fbf005414b/37d5a/thumbnail.png 300w,\n/static/72552018b8aa23d4d2f519fbf005414b/8c332/thumbnail.png 600w,\n/static/72552018b8aa23d4d2f519fbf005414b/03620/thumbnail.png 900w,\n/static/72552018b8aa23d4d2f519fbf005414b/6050d/thumbnail.png 1200w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"title":"Building Llama as a Service (LaaS)","description":"Creating the world’s first Llama as a Service, the random image API you didn't realize you needed.","slug":"/blog/building-llama-as-a-service","date":"2022-07-13","draft":false,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACcElEQVQoz42RXWvTYBzF++G89wMIu/NGRD+BF+rVBJHBQNm6N5m70I2hmxOmshfatemaNE2aput73YhrunZtmrZJmvQnzSa78MY/HM55HngO53+eSLVRY3N3nfdbC2zurWE0DXwfHNfH8QJGro/rBaH+e+d6k1DbAxer62D1btF1iMRSx7yen2Vrd5MX80+QNIG8XiZ5KiLKCoViGSEtkRIzyKpGNpfnRDgN2R0Hd4bdW8Ojo13eLr3j5bPnPH54H0WVqDYM8mdltEKJUrUR6mK5xlm5hl6soGhnVOt1HMelZVpcdwahWa87IlLIa6ytb/Do6QwPZu5Rq5WYjuP5TICRO/4Hnj8Jk/esIRkph5YrMhoE9K5HRKZ9ZSQV88rAHnTI1y6Jp+qYrSaimmI89gh8F993CQIPxxlQKddRZI2LC4Om2UYv1Bna/o3h2IOsnMcdWWGyn8I+258P6XQ6iIrIJPAg8JkEY8APkZEUrK4b1iCIWQ7iErbl3Rmqik5CVNCLNdzRgGKlimn2uDSHOP02UrHCzr7CVcskljpAzmjYfQ+zecXsqzd8+36I2ezQ77k3hrKUI1eo0mgY+GMb4/KcVqvLudHGHdlk9CQ/DuJ0exaqriGmlfBx3xqy8eE9G+urqKqGbY2JTIJpwgJBuNL/TVbOhZ1Nf7dS1kkcfkVInlAq/yJi9Ww+fdxmbm6OxcVFotEo0egSy8srrK6usbIy5SlWw/PCwgI7X/ZoX/XD3owLg7wioGVTyEqOSMu8RkqrxI6TxGMpEvE0iZM0QkJESGYQEhLJhBTyjRbDjZq/bzrrtAeUznTk02PSySP+AErHEELQ1SubAAAAAElFTkSuQmCC","aspectRatio":1.8987341772151898,"src":"/static/6ac383c8d4d2276d275b69574208976c/8c332/thumbnail.png","srcSet":"/static/6ac383c8d4d2276d275b69574208976c/95f17/thumbnail.png 150w,\n/static/6ac383c8d4d2276d275b69574208976c/37d5a/thumbnail.png 300w,\n/static/6ac383c8d4d2276d275b69574208976c/8c332/thumbnail.png 600w,\n/static/6ac383c8d4d2276d275b69574208976c/03620/thumbnail.png 900w,\n/static/6ac383c8d4d2276d275b69574208976c/6050d/thumbnail.png 1200w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}}]}},"pageContext":{}},"staticQueryHashes":["1994492073"]}